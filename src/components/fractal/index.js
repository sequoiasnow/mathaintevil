import './styles.scss'
import Complex from './complex'

function toRad (angle) {
  return angle * (Math.PI / 180);
}

class Fractal extends React.Component {
  componentDidMount() {
  } 
  
  constructor(props) {
    super(props)

    this.state = {
      width: 400,
      height: 800
    }

    this.renderBranch = this.renderBranch.bind(this)
  }

  renderBranch(x, y, theta, scale, n) {
    if (n > 4) {
      return ''
    }

    const nscale = scale * 0.35

    return  (
      <g transform={`translate(${113} ${-24 * 0.35}) scale(${nscale}) rotate(-20)`}>
        <use xlinkHref="#branch" />
        <g transform={`translate(${-154} ${-70}) rotate(-10)`}>
          {this.renderBranch(x, y, 0, scale, n + 1)}
        </g>
        <g transform={`translate(${-166} ${100}) rotate(-60)`}>
          {this.renderBranch(x, y, 0, scale, n + 1)}
        </g>
        {this.renderBranch(x, y, 0, scale, n + 1)}
        <g transform={`translate(${326} ${-8}) rotate(110)`}>
          {this.renderBranch(x, y, 0, scale, n + 1)}
        </g>
      </g>
    )

    /*
       return (
       <g>
       <use href="#branch" transform={`translate(${x} ${y}) scale(${scale}) rotate(${theta} 83.5 183.5)`} />
       <g transform={`translate(${x + 105 * scale} ${y - 20 * scale}) scale(${nscale}) rotate(-20)`}>
       <use href="#branch" />
       </g>
       </g>
       ) */
  }
  
  render() {
    const { width, height } = this.state

    const iterations = 5;
    const origional = {
      scale: 0.5,
      factor: 0.7
    }

    return (
      <div className="fractal-container">
        <svg viewBox={`0 0 800 800`} width="50%" height="50%">
          <defs>

            <use href="#branch" transform="translate(310, 380) scale(0.35) rotate(-20)" />
            <use href="#branch" transform="translate(200, 400)" />
            <path d="M6.40563281,369 C5.2387314,358.45745 4.56030623,350.567539 4.37035732,345.330268 C4.18876708,340.323462 4.18077623,330.218448 4.34638478,315.015225 L4.34638461,315.015225 C4.36225876,313.557943 4.40998794,312.101183 4.48953794,310.645988 C5.03641875,300.641987 5.67511704,292.485867 6.40563281,286.177626 C7.18987869,279.405408 8.53273766,272.075804 10.4342097,264.188815 C11.4682592,256.083204 12.1155577,249.996654 12.3761051,245.929167 C12.6366526,241.861679 12.6366526,237.843052 12.3761051,233.873284 C13.0577693,230.797752 13.8357234,228.035548 14.7099672,225.586672 C15.5842111,223.137796 17.0340388,219.65968 19.0594503,215.152323 C21.2210676,199.480853 22.997335,187.737621 24.3882525,179.922627 C25.77917,172.107633 27.130428,166.278586 28.4420266,162.435484 L34.5317852,130.154634 L34.5317852,105.978805 C31.2717446,84.6223398 28.5245307,68.4854863 26.2901438,57.5682446 C24.0557568,46.651003 21.6455256,37.5885184 19.0594503,30.3807911 L12.3761051,17.7884503 L0,9.52953584 L31.6957605,1 L37.7733054,17.7884503 L39.6602807,30.3807911 L49.9308379,59.7010368 C52.6299266,68.5649043 54.468498,75.2252403 55.4465518,79.6820445 C56.4246057,84.1388487 57.474171,90.6391985 58.5952477,99.1830938 L58.5952477,112.901539 L58.5952477,133.215391 L65.0844347,137.654749 L99.5429506,117.405957 L129.738477,101.037513 L140.20774,96.5994558 L148.49308,90.0105934 L167,95.2087508 L167,117.405957 L157.672909,112.901539 L138.707451,119.956181 L117.181999,130.154634 L106.80034,139.290493 L67.2279019,162.435484 L63.6712679,169.736843 L55.4465518,177.157897 L51.8237059,216.706523 L48.1820608,228.393268 C48.5720674,236.640197 48.5720674,243.804726 48.1820608,249.886854 C47.7920543,255.968982 46.7698381,264.74585 45.1154124,276.217456 L42.4878963,292.775015 L42.4878963,315.788925 C42.4878963,322.705352 42.4878963,327.421059 42.4878963,329.936049 C42.4878963,336.08066 42.4878963,339.695404 42.4878963,341.255986 C42.4878963,343.774688 42.4878963,347.170234 42.4878963,351.442624 L45.1154124,369 L6.40563281,369 Z" id="branch" stroke="orange" strokeWidth="1" fill="orange" x="0" y="0"></path>
          </defs>
          <g transform={`translate(-200 400) scale(4)`}>
            {this.renderBranch(10, 380, 0, 1, 0)}
          </g>
        </svg>
      </div>
    ) 
  }
}

export default Fractal
